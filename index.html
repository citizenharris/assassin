<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Assassin Game</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Courier New", monospace;
        background: #1a1a1a;
        color: #00ff00;
        padding: 20px;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .container {
        max-width: 600px;
        width: 100%;
        background: #000;
        border: 2px solid #00ff00;
        padding: 30px;
        border-radius: 10px;
      }

      h1 {
        text-align: center;
        margin-bottom: 20px;
        font-size: 2em;
      }

      .rules {
        margin-bottom: 30px;
        line-height: 1.6;
        white-space: pre-line;
      }

      .input-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        margin-bottom: 10px;
      }

      input {
        width: 100%;
        padding: 10px;
        background: #000;
        border: 1px solid #00ff00;
        color: #00ff00;
        font-family: "Courier New", monospace;
        font-size: 16px;
      }

      button {
        width: 100%;
        padding: 15px;
        background: #00ff00;
        color: #000;
        border: none;
        font-family: "Courier New", monospace;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        border-radius: 5px;
      }

      button:hover {
        background: #00cc00;
      }

      .result {
        display: none;
        margin-top: 20px;
        padding: 20px;
        background: #003300;
        border: 2px solid #00ff00;
        border-radius: 5px;
        white-space: pre-line;
      }

      .result.show {
        display: block;
      }

      .error {
        color: #ff0000;
        margin-top: 10px;
      }

      .clear-btn {
        margin-top: 15px;
        background: #ff0000;
        color: #fff;
      }

      .clear-btn:hover {
        background: #cc0000;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ðŸ”ª Assassin ðŸ”ª</h1>

      <div class="rules">
        The rules:
        <ul>
          <li>1. You are trying to kill your victim with the specified weapon *only in the specified location* </li>
          <li>2. You must hand them the weapon. If you throw the weapon and they catch it then it will not count as a murder. </li>
          <li>3. You cannot hide the object in another object, you must hand them the weapon undisguised.</li>
        </ul>
        Be creative! The game is afoot!
      </div>

      <div class="input-group">
        <label for="name">Enter your full first name, killer:</label>
        <input type="text" id="name" placeholder="Your name..." />
        <div id="error" class="error"></div>
      </div>

      <button onclick="chooseVictim()">Claim your victim</button>

      <div id="result" class="result">
        <div id="assignment"></div>
        <button class="clear-btn" onclick="clearResult()">Clear screen</button>
      </div>
    </div>

    <script>
      const weapons = [
        "another assassin's mobile phone (not yours)",
        "some butter (in or out of wrapper)",
        "a teapot or cafetierre (If one not available, jug of water)",
        "a loo roll",
        "a bar of soap",
        "a phone charger",
        "a book",
        "an eggcup",
        "a pillow",
        "a jug of water",
        "a bottle of wine",
        "a pair of boxers",
        "a pot/pan",
        "a lightbulb",
        "a paper chicken",
        "peppercorn",
        "pair of knickers",
        "a credit/debit card",
        "a mug",
        "a bracelet",
        "a multicoloured sock",
        "a pair of spectables/sunglasses",
        "a piece of fruit",
        "a chair or stool",
        "a notebook",
      ];

      const rooms = [
        "the sitting room",
        "the sitting room",
        "the sitting room",
        "the dining room",
        "the dining room",
        "the grand foyer",
        "the hall",
        "the hall",
        "a corridor",
        "a corridor",
        "on the stairs",
        "the games room",
        "the games room",
        "any bathroom",
        "any bathroom",
        "any bedroom",
        "any bedroom",
        "the kitchen",
        "the kitchen",
        "any outside area",
        "any outside area",
        "the patio",
        "the hot tub",
        "next to a fireplace (outside included)",
      ];

      const killers = [
        "Kish H",
        "Maulik",
        "Dhiraj",
        "Jayna",
        "Bhavni",
        "Breijesh",
        "Hemali",
        "Ravneet",
        "Param",
        "Harry",
        "Kish M",
        "Amrit",
        "Rohit",
        "Vicky",
        "Arti",
        "Becky",
        "Himal",
        "Mukesh",
        "Jigna",
        "Priya",
        "Pav",
        "Pavan",
        "Aarti",
      ];

      function shuffle(array) {
        const arr = [...array];
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }

      function titleCase(str) {
        return str
          .split(" ")
          .map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
          .join(" ");
      }

      function setup() {
        const shuffledKillers = shuffle(killers);
        const shuffledWeapons = shuffle(weapons);
        const shuffledRooms = shuffle(rooms);

        const victims = [
          shuffledKillers[shuffledKillers.length - 1],
          ...shuffledKillers.slice(0, -1),
        ];

        const plots = {};
        for (let i = 0; i < shuffledKillers.length; i++) {
          plots[shuffledKillers[i]] = {
            victim: victims[i],
            weapon: shuffledWeapons[i],
            room: shuffledRooms[i],
          };
        }

        return plots;
      }

      let plots = setup();

      function chooseVictim() {
        const nameInput = document.getElementById("name");
        const errorDiv = document.getElementById("error");
        const resultDiv = document.getElementById("result");
        const assignmentDiv = document.getElementById("assignment");

        const playerName = titleCase(nameInput.value.trim());

        errorDiv.textContent = "";

        if (!playerName) {
          errorDiv.textContent = "Please enter your name!";
          return;
        }

        const plot = plots[playerName];

        if (plot) {
          assignmentDiv.innerHTML = `
You are killing <b>${plot.victim}</b> with <b>${plot.weapon}</b> in <b>${plot.room}</b>.

Write this down and do not tell anyone!
        `;
          resultDiv.classList.add("show");
          nameInput.value = "";
        } else {
          errorDiv.textContent =
            "This name is not in the list! Remember to use your full first name, no nicknames.";
          resultDiv.classList.remove("show");
        }
      }

      function clearResult() {
        const resultDiv = document.getElementById("result");
        resultDiv.classList.remove("show");
      }

      document.getElementById("name").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          chooseVictim();
        }
      });
    </script>
  </body>
</html>
